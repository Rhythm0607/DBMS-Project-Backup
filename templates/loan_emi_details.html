{% extends "base.html" %}

{% block title %}Loan EMI Details - BankBase{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">Loan {{ loan.loan_number }}</h2>
        <p class="card-subtitle">
            Type: {{ loan.loan_type }} |
            Principal: <span class="money">{{ loan.principal_amount }}</span> |
            Rate: {{ loan.interest_rate }}% |
            Tenure: {{ loan.tenure_months }} months
        </p>
    </div>

    <div class="grid grid-3 mb-2">
        <div class="stat-card">
            <div class="stat-label">Outstanding Balance</div>
            <div class="stat-value money">{{ loan.outstanding_balance }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">EMI Amount</div>
            <div class="stat-value money">{{ loan.emi_amount }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Status</div>
            <div class="stat-value">{{ loan.status }}</div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h3 class="card-title">EMI Schedule</h3>
    </div>

    {% if emi_schedule %}
    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Due Date</th>
                    <th class="text-right">Amount</th>
                    <th class="text-right">Paid</th>
                    <th>Status</th>
                    <th>Paid At</th>
                </tr>
            </thead>
            <tbody>
                {% for emi in emi_schedule %}
                <tr>
                    <td>{{ emi.emi_number }}</td>
                    <td>{{ emi.due_date }}</td>
                    <td class="text-right money">{{ emi.amount }}</td>
                    <td class="text-right money">{{ emi.paid_amount }}</td>
                    <td>{{ emi.status }}</td>
                    <td>{{ emi.paid_at or '-' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p class="text-muted">No EMI schedule available.</p>
    {% endif %}
</div>
{% endblock %}

